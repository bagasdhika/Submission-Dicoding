/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";const t="https://story-api.dicoding.dev/v1";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function e(){var t=c(),n=t.m(e),f=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function l(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===f||"GeneratorFunction"===(n.displayName||n.name))}var p={throw:1,return:2,break:3,continue:3};function y(t){var n,e;return function(o){n||(n={stop:function(){return e(o.a,2)},catch:function(){return o.v},abrupt:function(t,n){return e(o.a,p[t],n)},delegateYield:function(t,i,a){return n.resultName=i,e(o.d,r(t),a)},finish:function(t){return e(o.f,t)}},e=function(t,e,r){o.p=n.prev,o.n=n.next;try{return t(e,r)}finally{n.next=o.n}}),n.resultName&&(n[n.resultName]=o.v,n.resultName=void 0),n.sent=o.v,n.next=o.n;try{return t.call(this,n)}finally{o.p=n.prev,o.n=n.next}}}return(e=function(){return{wrap:function(n,e,r,o){return t.w(y(n),e,r,o&&o.reverse())},isGeneratorFunction:l,mark:t.m,awrap:function(t,n){return new s(t,n)},AsyncIterator:u,async:function(t,n,e,r,o){return(l(n)?a:i)(y(t),n,e,r,o)},keys:o,values:r}})()}function r(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(n(t)+" is not iterable")}function o(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function i(t,n,e,r,o){var i=a(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function a(t,n,e,r,o){return new u(c().w(t,n,e,r),o||Promise)}function u(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof s?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(f(u.prototype),f(u.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),f(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function c(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return f(s,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function s(){}function l(){}n=Object.getPrototypeOf;var p=[][r]?n(n([][r]())):(f(n={},r,(function(){return this})),n),y=l.prototype=u.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,f(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t}return s.prototype=l,f(y,"constructor",l),f(l,"constructor",s),s.displayName="GeneratorFunction",f(l,o,"GeneratorFunction"),f(y),f(y,o,"Generator"),f(y,r,(function(){return this})),f(y,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:i,m:v}})()}function f(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}f=function(t,n,e,r){function i(n,e){f(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},f(t,n,e,r)}function s(t,n){this.v=t,this.k=n}function l(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function p(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){l(i,r,o,a,u,"next",t)}function u(t){l(i,r,o,a,u,"throw",t)}a(void 0)}))}}var y={REGISTER:"".concat(t,"/register"),LOGIN:"".concat(t,"/login"),STORIES:"".concat(t,"/stories"),STORIES_GUEST:"".concat(t,"/stories/guest"),NOTIFICATION:"".concat(t,"/notifications/subscribe")};function v(t){return d.apply(this,arguments)}function d(){return(d=p(e().mark((function t(n){var r,o,i,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,o=n.email,i=n.password,t.next=3,fetch(y.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:o,password:i})});case 3:return a=t.sent,t.abrupt("return",a.json());case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return m.apply(this,arguments)}function m(){return(m=p(e().mark((function t(n){var r,o,i;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.email,o=n.password,t.next=3,fetch(y.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})});case 3:return i=t.sent,t.abrupt("return",i.json());case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){return g.apply(this,arguments)}function g(){return g=p(e().mark((function t(n){var r,o,i,a=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:1,o=a.length>2&&void 0!==a[2]?a[2]:10,t.next=4,fetch("".concat(y.STORIES,"?page=").concat(r,"&size=").concat(o,"&location=1"),{headers:{Authorization:"Bearer ".concat(n)}});case 4:return i=t.sent,t.abrupt("return",i.json());case 6:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function w(t,n){return x.apply(this,arguments)}function x(){return(x=p(e().mark((function t(n,r){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(y.STORIES,{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:n});case 2:return o=t.sent,t.abrupt("return",o.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t,n){return S.apply(this,arguments)}function S(){return(S=p(e().mark((function t(n,r){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(y.NOTIFICATION,{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return o=t.sent,t.abrupt("return",o.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t,n){return j.apply(this,arguments)}function j(){return(j=p(e().mark((function t(n,r){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(y.NOTIFICATION,{method:"DELETE",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({endpoint:n})});case 2:return o=t.sent,t.abrupt("return",o.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var P="toast-container",E=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",e=function(){var t=document.getElementById(P);return t||((t=document.createElement("div")).id=P,t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),document.body.appendChild(t)),t}(),r=document.createElement("div");r.className="toast toast-".concat(n),r.setAttribute("role","status"),r.tabIndex=0,r.innerHTML="\n    <span>".concat(t,'</span>\n    <button aria-label="Tutup notifikasi">&times;</button>\n  ');var o=function(){r.classList.add("hide"),setTimeout((function(){return r.remove()}),300)};r.querySelector("button").addEventListener("click",o),e.appendChild(r),setTimeout(o,3e3)};function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function I(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function _(){var t=D(),n=t.m(_),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,N(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(_=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new M(t,n)},AsyncIterator:A,async:function(t,n,e,o,a){return(r(n)?F:B)(i(t),n,e,o,a)},keys:G,values:N}})()}function N(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(T(t)+" is not iterable")}function G(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function B(t,n,e,r,o){var i=F(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function F(t,n,e,r,o){return new A(D().w(t,n,e,r),o||Promise)}function A(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof M?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(C(A.prototype),C(A.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),C(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function D(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return C(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(C(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,C(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,C(l,"constructor",f),C(f,"constructor",c),c.displayName="GeneratorFunction",C(f,o,"GeneratorFunction"),C(l),C(l,o,"Generator"),C(l,r,(function(){return this})),C(l,"toString",(function(){return"[object Generator]"})),(D=function(){return{w:i,m:p}})()}function C(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}C=function(t,n,e,r){function i(n,e){C(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},C(t,n,e,r)}function M(t,n){this.v=t,this.k=n}function R(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function H(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){R(i,r,o,a,u,"next",t)}function u(t){R(i,r,o,a,u,"throw",t)}a(void 0)}))}}var z=function(){var t=H(_().mark((function t(){var n;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Notification"in window){t.next=3;break}return alert("Browser tidak mendukung notifikasi"),t.abrupt("return",!1);case 3:return t.next=5,Notification.requestPermission();case 5:return n=t.sent,t.abrupt("return","granted"===n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){return"serviceWorker"in navigator&&"PushManager"in window},W=function(){var t=H(_().mark((function t(){var n;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q()){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,navigator.serviceWorker.ready;case 4:return n=t.sent,t.abrupt("return",n.pushManager.getSubscription());case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=H(_().mark((function t(){var n,e,r;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q()){t.next=2;break}throw new Error("Push Notification tidak didukung browser");case 2:return t.next=4,z();case 4:if(t.sent){t.next=7;break}throw new Error("Izin notifikasi tidak diberikan");case 7:return t.next=9,navigator.serviceWorker.ready;case 9:return n=t.sent,t.next=12,n.pushManager.getSubscription();case 12:if(!(e=t.sent)){t.next=15;break}return t.abrupt("return",e);case 15:return t.next=17,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(i="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk",void 0,void 0,a=(i+"=".repeat(1)).replace(/-/g,"+").replace(/_/g,"/"),u=atob(a),Uint8Array.from((o=u,function(t){if(Array.isArray(t))return I(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,n){if(t){if("string"==typeof t)return I(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?I(t,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return t.charCodeAt(0)}))))});case 17:return r=t.sent,t.abrupt("return",r);case 19:case"end":return t.stop()}var o,i,a,u}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=H(_().mark((function t(){var n;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return t.abrupt("return",n.unsubscribe());case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function U(){var t=tt(),n=t.m(U),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,J(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(U=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new et(t,n)},AsyncIterator:Z,async:function(t,n,e,o,a){return(r(n)?X:Q)(i(t),n,e,o,a)},keys:$,values:J}})()}function J(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Y(t)+" is not iterable")}function $(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Q(t,n,e,r,o){var i=X(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function X(t,n,e,r,o){return new Z(tt().w(t,n,e,r),o||Promise)}function Z(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof et?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(nt(Z.prototype),nt(Z.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),nt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function tt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return nt(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(nt(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,nt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,nt(l,"constructor",f),nt(f,"constructor",c),c.displayName="GeneratorFunction",nt(f,o,"GeneratorFunction"),nt(l),nt(l,o,"Generator"),nt(l,r,(function(){return this})),nt(l,"toString",(function(){return"[object Generator]"})),(tt=function(){return{w:i,m:p}})()}function nt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}nt=function(t,n,e,r){function i(n,e){nt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},nt(t,n,e,r)}function et(t,n){this.v=t,this.k=n}function rt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ot(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){rt(i,r,o,a,u,"next",t)}function u(t){rt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function it(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,at(r.key),r)}}function at(t){var n=function(t){if("object"!=Y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Y(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(n)?n:n+""}var ut=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=ot(U().mark((function t(){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container" id="main-content" tabindex="-1">\n        <h1 class="page-title">Daftar Story</h1>\n\n        \x3c!-- ===== PUSH TOGGLE (ADVANCED) ===== --\x3e\n        <div class="push-toggle">\n          <label>\n            <input type="checkbox" id="pushToggle" />\n            Aktifkan Push Notification\n          </label>\n        </div>\n\n        <p class="location-info">\n          Klik salah satu story untuk menyorot lokasi pada peta\n        </p>\n\n        <div\n          id="map"\n          class="story-map"\n          aria-label="Peta lokasi story"\n          role="application"\n        ></div>\n\n        <section\n          id="storyList"\n          class="story-list"\n          aria-live="polite"\n          aria-busy="true"\n        ></section>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=ot(U().mark((function t(){var n,e,r,o,i,a,u,c,f,s;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("token")){t.next=4;break}return location.hash="#/login",t.abrupt("return");case 4:if(r=document.getElementById("pushToggle"),!q()){t.next=13;break}return t.next=8,W();case 8:o=t.sent,r.checked=!!o,r.addEventListener("change",ot(U().mark((function t(){var n,o;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r.checked){t.next=10;break}return t.next=4,K();case 4:return n=t.sent,t.next=7,k(n,e);case 7:E("Push notification diaktifkan","success"),t.next=19;break;case 10:return t.next=12,W();case 12:if(!(o=t.sent)){t.next=19;break}return t.next=16,O(o.endpoint,e);case 16:return t.next=18,V();case 18:E("Push notification dinonaktifkan","info");case 19:t.next=26;break;case 21:t.prev=21,t.t0=t.catch(0),console.error(t.t0),E("Gagal mengatur push notification","error"),r.checked=!r.checked;case 26:case"end":return t.stop()}}),t,null,[[0,21]])})))),t.next=15;break;case 13:r.disabled=!0,E("Browser tidak mendukung push notification","warning");case 15:return(i=document.getElementById("storyList")).setAttribute("aria-busy","true"),i.innerHTML='\n      <div class="skeleton skeleton-card"></div>\n      <div class="skeleton skeleton-card"></div>\n      <div class="skeleton skeleton-card"></div>\n    ',a=L.map("map",{center:[-6.2,106.8],zoom:5,zoomControl:!0}),u=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap"}),c=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenTopoMap"}),u.addTo(a),L.control.layers({OpenStreetMap:u,Topographic:c},null,{position:"topright"}).addTo(a),t.prev=23,t.next=26,b(e);case 26:f=t.sent,t.next=35;break;case 29:return t.prev=29,t.t0=t.catch(23),i.innerHTML='<p role="alert">Gagal memuat data story</p>',i.setAttribute("aria-busy","false"),E("Gagal memuat data story","error"),t.abrupt("return");case 35:if(i.innerHTML="",i.setAttribute("aria-busy","false"),null!==(n=f)&&void 0!==n&&null!==(n=n.listStory)&&void 0!==n&&n.length){t.next=40;break}return i.innerHTML="<p>Belum ada story</p>",t.abrupt("return");case 40:s=[],f.listStory.forEach((function(t){var n=document.createElement("article");if(n.className="story-card",n.tabIndex=0,n.setAttribute("role","button"),n.setAttribute("aria-label","Story oleh ".concat(t.name)),n.innerHTML='\n        <div class="story-header">\n          <strong>'.concat(t.name,'</strong>\n        </div>\n\n        <img\n          src="').concat(t.photoUrl,'"\n          alt="Foto story oleh ').concat(t.name,'"\n          loading="lazy"\n        />\n\n        <div class="story-body">\n          <p>').concat(t.description,"</p>\n          <small>").concat(new Date(t.createdAt).toLocaleString(),"</small>\n        </div>\n      "),t.lat&&t.lon){var e=L.marker([t.lat,t.lon]).addTo(a).bindPopup("<strong>".concat(t.name,"</strong><br>").concat(t.description));s.push(e);var r=function(){a.setView([t.lat,t.lon],10,{animate:!0}),s.forEach((function(t){return t.closePopup()})),e.openPopup()};n.addEventListener("click",r),n.addEventListener("keypress",(function(t){"Enter"===t.key&&r()}))}i.appendChild(n)}));case 42:case"end":return t.stop()}}),t,null,[[23,29]])}))),function(){return e.apply(this,arguments)})}],n&&it(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ft(){var t=dt(),n=t.m(ft),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,st(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ft=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new mt(t,n)},AsyncIterator:vt,async:function(t,n,e,o,a){return(r(n)?yt:pt)(i(t),n,e,o,a)},keys:lt,values:st}})()}function st(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ct(t)+" is not iterable")}function lt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function pt(t,n,e,r,o){var i=yt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function yt(t,n,e,r,o){return new vt(dt().w(t,n,e,r),o||Promise)}function vt(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof mt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(ht(vt.prototype),ht(vt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),ht(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function dt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return ht(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(ht(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,ht(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,ht(l,"constructor",f),ht(f,"constructor",c),c.displayName="GeneratorFunction",ht(f,o,"GeneratorFunction"),ht(l),ht(l,o,"Generator"),ht(l,r,(function(){return this})),ht(l,"toString",(function(){return"[object Generator]"})),(dt=function(){return{w:i,m:p}})()}function ht(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ht=function(t,n,e,r){function i(n,e){ht(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},ht(t,n,e,r)}function mt(t,n){this.v=t,this.k=n}function bt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function gt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){bt(i,r,o,a,u,"next",t)}function u(t){bt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function wt(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xt(r.key),r)}}function xt(t){var n=function(t){if("object"!=ct(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=ct(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ct(n)?n:n+""}var kt=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=gt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="auth-container">\n        <h1>Login</h1>\n\n        <form id="loginForm" class="auth-form">\n          <label for="loginEmail">Email</label>\n          <input\n            type="email"\n            id="loginEmail"\n            required\n            autocomplete="username"\n          />\n\n          <label for="loginPassword">Password</label>\n          <input\n            type="password"\n            id="loginPassword"\n            required\n            minlength="8"\n            autocomplete="current-password"\n          />\n\n          <button type="submit" class="btn-primary">\n            Login\n          </button>\n        </form>\n\n        <p class="auth-switch">\n          Belum punya akun?\n          <a href="#/register" class="link-button">Daftar</a>\n        </p>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=gt(ft().mark((function t(){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("loginForm").addEventListener("submit",function(){var t=gt(ft().mark((function t(n){var e,r,o;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e=document.getElementById("loginEmail").value,r=document.getElementById("loginPassword").value,t.prev=3,t.next=6,h({email:e,password:r});case 6:if(!(o=t.sent).error){t.next=10;break}return alert(o.message),t.abrupt("return");case 10:localStorage.setItem("token",o.loginResult.token),localStorage.setItem("name",o.loginResult.name),location.hash="#/",t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),alert("Login gagal"),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&wt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Ot(){var t=_t(),n=t.m(Ot),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,jt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Ot=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Gt(t,n)},AsyncIterator:It,async:function(t,n,e,o,a){return(r(n)?Tt:Et)(i(t),n,e,o,a)},keys:Pt,values:jt}})()}function jt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(St(t)+" is not iterable")}function Pt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Et(t,n,e,r,o){var i=Tt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Tt(t,n,e,r,o){return new It(_t().w(t,n,e,r),o||Promise)}function It(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Gt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Nt(It.prototype),Nt(It.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Nt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function _t(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Nt(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Nt(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Nt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Nt(l,"constructor",f),Nt(f,"constructor",c),c.displayName="GeneratorFunction",Nt(f,o,"GeneratorFunction"),Nt(l),Nt(l,o,"Generator"),Nt(l,r,(function(){return this})),Nt(l,"toString",(function(){return"[object Generator]"})),(_t=function(){return{w:i,m:p}})()}function Nt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Nt=function(t,n,e,r){function i(n,e){Nt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Nt(t,n,e,r)}function Gt(t,n){this.v=t,this.k=n}function Lt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Bt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Lt(i,r,o,a,u,"next",t)}function u(t){Lt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ft(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,At(r.key),r)}}function At(t){var n=function(t){if("object"!=St(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=St(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(n)?n:n+""}var Dt=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Bt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="auth-container">\n        <h1>Register</h1>\n\n        <form id="registerForm" class="auth-form">\n          <label for="regName">Nama</label>\n          <input\n            type="text"\n            id="regName"\n            required\n          />\n\n          <label for="regEmail">Email</label>\n          <input\n            type="email"\n            id="regEmail"\n            required\n            autocomplete="username"\n          />\n\n          <label for="regPassword">Password</label>\n          <input\n            type="password"\n            id="regPassword"\n            required\n            minlength="8"\n            autocomplete="new-password"\n          />\n\n          <button type="submit" class="btn-primary">\n            Daftar\n          </button>\n        </form>\n\n        <p class="auth-switch">\n          Sudah punya akun?\n          <a href="#/login" class="link-button">Login</a>\n        </p>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Bt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("registerForm").addEventListener("submit",function(){var t=Bt(Ot().mark((function t(n){var e,r,o,i;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e=document.getElementById("regName").value,r=document.getElementById("regEmail").value,o=document.getElementById("regPassword").value,t.prev=4,t.next=7,v({name:e,email:r,password:o});case 7:if(!(i=t.sent).error){t.next=11;break}return alert(i.message),t.abrupt("return");case 11:alert("Registrasi berhasil, silakan login"),location.hash="#/login",t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),alert("Registrasi gagal"),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&Ft(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();const Ct=(t,n)=>n.some((n=>t instanceof n));let Mt,Rt;const Ht=new WeakMap,zt=new WeakMap,qt=new WeakMap;let Wt={get(t,n,e){if(t instanceof IDBTransaction){if("done"===n)return Ht.get(t);if("store"===n)return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Yt(t[n])},set:(t,n,e)=>(t[n]=e,!0),has:(t,n)=>t instanceof IDBTransaction&&("done"===n||"store"===n)||n in t};function Kt(t){Wt=t(Wt)}function Vt(t){return"function"==typeof t?(n=t,(Rt||(Rt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...t){return n.apply(Ut(this),t),Yt(this.request)}:function(...t){return Yt(n.apply(Ut(this),t))}):(t instanceof IDBTransaction&&function(t){if(Ht.has(t))return;const n=new Promise(((n,e)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),r()},i=()=>{e(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));Ht.set(t,n)}(t),Ct(t,Mt||(Mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,Wt):t);var n}function Yt(t){if(t instanceof IDBRequest)return function(t){const n=new Promise(((n,e)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(Yt(t.result)),r()},i=()=>{e(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}));return qt.set(n,t),n}(t);if(zt.has(t))return zt.get(t);const n=Vt(t);return n!==t&&(zt.set(t,n),qt.set(n,t)),n}const Ut=t=>qt.get(t),Jt=["get","getKey","getAll","getAllKeys","count"],$t=["put","add","delete","clear"],Qt=new Map;function Xt(t,n){if(!(t instanceof IDBDatabase)||n in t||"string"!=typeof n)return;if(Qt.get(n))return Qt.get(n);const e=n.replace(/FromIndex$/,""),r=n!==e,o=$t.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Jt.includes(e))return;const i=async function(t,...n){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(n.shift())),(await Promise.all([a[e](...n),o&&i.done]))[0]};return Qt.set(n,i),i}Kt((t=>({...t,get:(n,e,r)=>Xt(n,e)||t.get(n,e,r),has:(n,e)=>!!Xt(n,e)||t.has(n,e)})));const Zt=["continue","continuePrimaryKey","advance"],tn={},nn=new WeakMap,en=new WeakMap,rn={get(t,n){if(!Zt.includes(n))return t[n];let e=tn[n];return e||(e=tn[n]=function(...t){nn.set(this,en.get(this)[n](...t))}),e}};async function*on(...t){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...t)),!n)return;const e=new Proxy(n,rn);for(en.set(e,n),qt.set(e,Ut(n));n;)yield e,n=await(nn.get(e)||n.continue()),nn.delete(e)}function an(t,n){return n===Symbol.asyncIterator&&Ct(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===n&&Ct(t,[IDBIndex,IDBObjectStore])}function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function cn(){var t=vn(),n=t.m(cn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,fn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(cn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new hn(t,n)},AsyncIterator:yn,async:function(t,n,e,o,a){return(r(n)?pn:ln)(i(t),n,e,o,a)},keys:sn,values:fn}})()}function fn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(un(t)+" is not iterable")}function sn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ln(t,n,e,r,o){var i=pn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function pn(t,n,e,r,o){return new yn(vn().w(t,n,e,r),o||Promise)}function yn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof hn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(dn(yn.prototype),dn(yn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),dn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function vn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return dn(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(dn(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,dn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,dn(l,"constructor",f),dn(f,"constructor",c),c.displayName="GeneratorFunction",dn(f,o,"GeneratorFunction"),dn(l),dn(l,o,"Generator"),dn(l,r,(function(){return this})),dn(l,"toString",(function(){return"[object Generator]"})),(vn=function(){return{w:i,m:p}})()}function dn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}dn=function(t,n,e,r){function i(n,e){dn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},dn(t,n,e,r)}function hn(t,n){this.v=t,this.k=n}function mn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}Kt((t=>({...t,get:(n,e,r)=>an(n,e)?on:t.get(n,e,r),has:(n,e)=>an(n,e)||t.has(n,e)})));var bn="offline-stories",gn=function(t,n,{blocked:e,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,n),u=Yt(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(Yt(a.result),t.oldVersion,t.newVersion,Yt(a.transaction),t)})),e&&a.addEventListener("blocked",(t=>e(t.oldVersion,t.newVersion,t))),u.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),u}("dicoding-story-db",1,{upgrade:function(t){t.objectStoreNames.contains(bn)||t.createObjectStore(bn,{keyPath:"id",autoIncrement:!0})}}),wn=function(t){return(n=cn().mark((function n(){return cn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,gn;case 2:return n.abrupt("return",n.sent.add(bn,t));case 3:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){mn(i,r,o,a,u,"next",t)}function u(t){mn(i,r,o,a,u,"throw",t)}a(void 0)}))})();var n};function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function kn(){var t=Tn(),n=t.m(kn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Sn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(kn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new _n(t,n)},AsyncIterator:En,async:function(t,n,e,o,a){return(r(n)?Pn:jn)(i(t),n,e,o,a)},keys:On,values:Sn}})()}function Sn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(xn(t)+" is not iterable")}function On(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function jn(t,n,e,r,o){var i=Pn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Pn(t,n,e,r,o){return new En(Tn().w(t,n,e,r),o||Promise)}function En(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof _n?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(In(En.prototype),In(En.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),In(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Tn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return In(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(In(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,In(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,In(l,"constructor",f),In(f,"constructor",c),c.displayName="GeneratorFunction",In(f,o,"GeneratorFunction"),In(l),In(l,o,"Generator"),In(l,r,(function(){return this})),In(l,"toString",(function(){return"[object Generator]"})),(Tn=function(){return{w:i,m:p}})()}function In(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}In=function(t,n,e,r){function i(n,e){In(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},In(t,n,e,r)}function _n(t,n){this.v=t,this.k=n}function Nn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Gn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Nn(i,r,o,a,u,"next",t)}function u(t){Nn(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ln(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bn(r.key),r)}}function Bn(t){var n=function(t){if("object"!=xn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=xn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xn(n)?n:n+""}const Fn={"/":ut,"/login":kt,"/register":Dt,"/add":function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Gn(kn().mark((function t(){return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <h1 class="page-title">Tambah Cerita</h1>\n\n        <form id="addStoryForm" class="story-form">\n\n          \x3c!-- DESKRIPSI --\x3e\n          <label for="description">Deskripsi Cerita</label>\n          <textarea\n            id="description"\n            name="description"\n            required\n            aria-required="true"\n            placeholder="Ceritakan pengalamanmu..."\n          ></textarea>\n\n          \x3c!-- FOTO --\x3e\n          <label for="photo">Foto</label>\n          <input\n            type="file"\n            id="photo"\n            name="photo"\n            accept="image/*"\n            aria-describedby="photoHelp"\n          />\n          <small id="photoHelp">Bisa dari galeri atau kamera</small>\n\n          \x3c!-- KAMERA --\x3e\n          <div class="camera-control">\n            <button type="button" id="cameraBtn"> Gunakan Kamera</button>\n            <button type="button" id="captureBtn" hidden>Ambil Foto</button>\n          </div>\n\n          <video\n            id="cameraPreview"\n            autoplay\n            playsinline\n            hidden\n            aria-label="Preview kamera"\n          ></video>\n\n          \x3c!-- MAP --\x3e\n          <label>Pilih Lokasi</label>\n          <div id="map"></div>\n          <p id="locationInfo" class="location-info">\n            Klik peta untuk menentukan lokasi\n          </p>\n\n          <button type="submit" class="btn-primary">\n            Posting Cerita\n          </button>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Gn(kn().mark((function t(){var n,e,r,o,i,a,u,c,f,s,l,p;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem("token")){t.next=4;break}return location.hash="#/login",t.abrupt("return");case 4:e=L.map("map").setView([-6.2,106.8],5),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap"}).addTo(e),r=null,o=null,i=null,e.on("click",(function(t){r=t.latlng.lat,o=t.latlng.lng,i&&e.removeLayer(i),i=L.marker(t.latlng).addTo(e),document.getElementById("locationInfo").textContent="Lokasi: ".concat(r.toFixed(4),", ").concat(o.toFixed(4))})),a=document.getElementById("cameraBtn"),u=document.getElementById("captureBtn"),c=document.getElementById("cameraPreview"),f=document.getElementById("photo"),s=null,l=function(){var t=Gn(kn().mark((function t(){var n;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=navigator.mediaDevices)&&void 0!==n&&n.getUserMedia){t.next=3;break}return E("Browser tidak mendukung kamera","error"),t.abrupt("return");case 3:return t.prev=3,t.next=6,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});case 6:s=t.sent,c.srcObject=s,c.hidden=!1,u.hidden=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),E("Izin kamera ditolak","error");case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}(),p=function(){s&&(s.getTracks().forEach((function(t){return t.stop()})),s=null),c.hidden=!0,u.hidden=!0},a.addEventListener("click",l),u.addEventListener("click",(function(){var t=document.createElement("canvas");t.width=c.videoWidth,t.height=c.videoHeight,t.getContext("2d").drawImage(c,0,0),t.toBlob((function(t){var n=new File([t],"camera.jpg",{type:"image/jpeg",lastModified:Date.now()}),e=new DataTransfer;e.items.add(n),f.files=e.files}),"image/jpeg",.8),p()})),window.addEventListener("hashchange",(function(){return p()}),{once:!0}),document.getElementById("addStoryForm").addEventListener("submit",function(){var t=Gn(kn().mark((function t(e){var i,a,u,c;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),i=document.getElementById("description").value,a=f.files[0],(u=new FormData).append("description",i),a&&u.append("photo",a),null!==r&&null!==o&&(u.append("lat",r),u.append("lon",o)),t.prev=7,t.next=10,w(u,n);case 10:c=t.sent,E(c.message,"success"),location.hash="#/",t.next=21;break;case 15:return t.prev=15,t.t0=t.catch(7),t.next=19,wn({description:i,photo:a,lat:r,lon:o,createdAt:(new Date).toISOString()});case 19:E("Offline: cerita disimpan & akan dikirim saat online","info"),location.hash="#/";case 21:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(n){return t.apply(this,arguments)}}());case 21:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&Ln(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}()};function An(t){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(t)}function Dn(){var t=qn(),n=t.m(Dn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Cn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Dn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Kn(t,n)},AsyncIterator:zn,async:function(t,n,e,o,a){return(r(n)?Hn:Rn)(i(t),n,e,o,a)},keys:Mn,values:Cn}})()}function Cn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(An(t)+" is not iterable")}function Mn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Rn(t,n,e,r,o){var i=Hn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Hn(t,n,e,r,o){return new zn(qn().w(t,n,e,r),o||Promise)}function zn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Kn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Wn(zn.prototype),Wn(zn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Wn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function qn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Wn(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Wn(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Wn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Wn(l,"constructor",f),Wn(f,"constructor",c),c.displayName="GeneratorFunction",Wn(f,o,"GeneratorFunction"),Wn(l),Wn(l,o,"Generator"),Wn(l,r,(function(){return this})),Wn(l,"toString",(function(){return"[object Generator]"})),(qn=function(){return{w:i,m:p}})()}function Wn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Wn=function(t,n,e,r){function i(n,e){Wn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Wn(t,n,e,r)}function Kn(t,n){this.v=t,this.k=n}function Vn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Yn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Vn(i,r,o,a,u,"next",t)}function u(t){Vn(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Un(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jn(r.key),r)}}function Jn(t){var n=function(t){if("object"!=An(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=An(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==An(n)?n:n+""}var $n=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Yn(Dn().mark((function t(){return Dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container not-found-page">\n        <h1 tabindex="0">404 - Not Found</h1>\n\n        <p>\n          Halaman yang kamu tuju tidak ditemukan.\n        </p>\n\n        <a href="#/" class="btn-primary">\n          Kembali ke Beranda\n        </a>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Yn(Dn().mark((function t(){var n;return Dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.querySelector(".not-found-page h1"))&&n.focus();case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&Un(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Qn(t){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function Xn(){var t=oe(),n=t.m(Xn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Zn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Xn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new ae(t,n)},AsyncIterator:re,async:function(t,n,e,o,a){return(r(n)?ee:ne)(i(t),n,e,o,a)},keys:te,values:Zn}})()}function Zn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Qn(t)+" is not iterable")}function te(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ne(t,n,e,r,o){var i=ee(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ee(t,n,e,r,o){return new re(oe().w(t,n,e,r),o||Promise)}function re(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof ae?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(ie(re.prototype),ie(re.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),ie(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function oe(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return ie(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(ie(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,ie(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,ie(l,"constructor",f),ie(f,"constructor",c),c.displayName="GeneratorFunction",ie(f,o,"GeneratorFunction"),ie(l),ie(l,o,"Generator"),ie(l,r,(function(){return this})),ie(l,"toString",(function(){return"[object Generator]"})),(oe=function(){return{w:i,m:p}})()}function ie(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ie=function(t,n,e,r){function i(n,e){ie(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},ie(t,n,e,r)}function ae(t,n){this.v=t,this.k=n}function ue(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ce(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){ue(i,r,o,a,u,"next",t)}function u(t){ue(i,r,o,a,u,"throw",t)}a(void 0)}))}}function fe(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,se(r.key),r)}}function se(t){var n=function(t){if("object"!=Qn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Qn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qn(n)?n:n+""}var le=function(){return t=function t(n){var e=n.content;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._content=e},n=[{key:"renderPage",value:(e=ce(Xn().mark((function t(){var n,e,r=this;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=location.hash.replace("#","")||"/",i=void 0,u=void 0,u="",(a={resource:(i=o.split("/"))[1]||null,id:i[2]||null}).resource&&(u+="/".concat(a.resource)),a.id&&(u+="/:id"),n=new(Fn[u||"/"]||$n),e=function(){var t=ce(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.render();case 2:return r._content.innerHTML=t.sent,t.next=5,n.afterRender();case 5:e=void 0,(e=document.getElementById("nav-list"))&&(localStorage.getItem("token")?(e.innerHTML='\n      <li><a href="#/">Beranda</a></li>\n      <li><a href="#/add">Tambah Cerita</a></li>\n      <li>\n        <button id="logoutBtn" class="logout-btn">Logout</button>\n      </li>\n    ',document.getElementById("logoutBtn").addEventListener("click",(function(){localStorage.removeItem("token"),location.hash="#/login"}))):e.innerHTML='\n      <li><a href="#/login">Login</a></li>\n      <li><a href="#/register">Register</a></li>\n    ');case 6:case"end":return t.stop()}var e}),t)})));return function(){return t.apply(this,arguments)}}(),!document.startViewTransition){t.next=8;break}document.startViewTransition(ce(Xn().mark((function t(){return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)})))),t.next=11;break;case 8:return this._content.animate([{opacity:0,transform:"translateY(8px)"},{opacity:1,transform:"translateY(0)"}],{duration:250,easing:"ease-out"}),t.next=11,e();case 11:case"end":return t.stop()}var o,i,a,u}),t,this)}))),function(){return e.apply(this,arguments)})}],n&&fe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}(),pe=function(){navigator.onLine?E("Kembali online","success"):E("Anda sedang offline","warning")};function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ve(){var t=we(),n=t.m(ve),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,de(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ve=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new ke(t,n)},AsyncIterator:ge,async:function(t,n,e,o,a){return(r(n)?be:me)(i(t),n,e,o,a)},keys:he,values:de}})()}function de(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ye(t)+" is not iterable")}function he(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function me(t,n,e,r,o){var i=be(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function be(t,n,e,r,o){return new ge(we().w(t,n,e,r),o||Promise)}function ge(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof ke?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(xe(ge.prototype),xe(ge.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),xe(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function we(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return xe(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(xe(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,xe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,xe(l,"constructor",f),xe(f,"constructor",c),c.displayName="GeneratorFunction",xe(f,o,"GeneratorFunction"),xe(l),xe(l,o,"Generator"),xe(l,r,(function(){return this})),xe(l,"toString",(function(){return"[object Generator]"})),(we=function(){return{w:i,m:p}})()}function xe(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}xe=function(t,n,e,r){function i(n,e){xe(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},xe(t,n,e,r)}function ke(t,n){this.v=t,this.k=n}function Se(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Oe(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Se(i,r,o,a,u,"next",t)}function u(t){Se(i,r,o,a,u,"throw",t)}a(void 0)}))}}var je=function(){var t=document.getElementById("navList"),n=localStorage.getItem("token");t&&(n?(t.innerHTML='\n      <li><a href="#/">Beranda</a></li>\n      <li><a href="#/add">Tambah Story</a></li>\n      <li>\n        <button id="toggleNotifBtn" aria-pressed="false">\n           Aktifkan Notifikasi\n        </button>\n      </li>\n      <li><button id="logoutBtn">Logout</button></li>\n    ',document.getElementById("logoutBtn").addEventListener("click",(function(){localStorage.clear(),location.hash="#/login",location.reload()}))):t.innerHTML='\n      <li><a href="#/login">Login</a></li>\n      <li><a href="#/register">Register</a></li>\n    ')};document.addEventListener("DOMContentLoaded",Oe(ve().mark((function t(){var n;return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.addEventListener("offline",pe),window.addEventListener("online",pe),n=new le({content:document.querySelector("#main-content")}),je(),t.next=5,n.renderPage();case 5:window.addEventListener("hashchange",Oe(ve().mark((function t(){return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return je(),t.next=3,n.renderPage();case 3:case"end":return t.stop()}}),t)}))));case 6:case"end":return t.stop()}}),t)})))),"serviceWorker"in navigator&&window.addEventListener("load",Oe(ve().mark((function t(){return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.serviceWorker.register("/sw.js");case 3:console.log("Service Worker registered"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("Service Worker failed");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),window.addEventListener("click",function(){var t=Oe(ve().mark((function t(n){return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("toggleNotifBtn"===n.target.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,z();case 4:if(t.sent){t.next=8;break}return alert("Izin notifikasi ditolak"),t.abrupt("return");case 8:alert("Izin notifikasi diberikan. Langganan aktif.");case 9:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())})();